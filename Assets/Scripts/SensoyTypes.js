//https://sabuda.grc.upv.es/api/applications/5f8edc99a3302d002d06241d/userHardSensors

var datos = {
    "userHardSensors": [
        {
            "name": "Satélite",
            "description": "European Space Agency - ESA: Data produced from ESA remote sensing data",
            "active": true,
            "telegramChatIds": [],
            "_id": "6319d587c6520a002bac443f",
            "sensorTypes": [
                {
                    "params": [],
                    "name": "Clorofila",
                    "unit": "milligram-per-liter",
                    "params_": [],
                    "alias": ""
                },
                {
                    "params": [],
                    "name": "Transparencia",
                    "unit": "meter",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "Sólidos en suspensión",
                    "unit": "gram",
                    "params_": []
                }
            ],
            "application": "Mar Menor",
            "type": "User",
            "esIndex": "5f8edc99a3302d002d06241d_6319d587c6520a002bac443f",
            "esPhysicalStationsAlias": "5f8edc99a3302d002d06241d_locations",
            "__v": 0
        },
        {
            "name": "Boya SMLG",
            "description": "Boya desarrollada en el marco del proyecto SMARTLAGOON por los socios Uppsala University y Univeristat Politècnica de València, y cuyo promotor es la empresa VIELCA Ingenieros, S.A. Los datos que se muestran provienen de componentes de instrumentación y no están validados, queda bajo responsabilidad de cada usuario el uso que se les de.",
            "active": true,
            "telegramChatIds": [],
            "_id": "63234ed9c6520a002bac4441",
            "sensorTypes": [
                {
                    "alert": {
                        "range": {
                            "min": 0,
                            "max": 100
                        },
                        "active": false
                    },
                    "params": [],
                    "params_": [],
                    "name": "Temperatura Aire",
                    "unit": "celsius",
                    "alias": ""
                },
                {
                    "params": [],
                    "name": "Humedad Relativa",
                    "unit": "percent",
                    "params_": [],
                    "alias": ""
                },
                {
                    "params": [],
                    "name": "Presión Vapor",
                    "unit": "kilopascal",
                    "params_": [],
                    "alias": ""
                },
                {
                    "params": [],
                    "name": "Velocidad Viento",
                    "unit": "meter-per-second",
                    "params_": [],
                    "alias": ""
                },
                {
                    "params": [],
                    "name": "Temperatura Agua",
                    "unit": "celsius",
                    "params_": [],
                    "alias": ""
                },
                {
                    "params": [],
                    "name": "Concentración O2",
                    "unit": "milligram-per-liter",
                    "params_": [],
                    "alias": ""
                },
                {
                    "params": [],
                    "name": "Saturación O2",
                    "params_": [],
                    "alias": "",
                    "unit": "percent"
                },
                {
                    "params": [],
                    "name": "Conductividad",
                    "params_": [],
                    "alias": "",
                    "unit": "microsiemens-per-centimeter"
                },
                {
                    "params": [],
                    "name": "Clorofila",
                    "unit": "microgram-per-liter",
                    "params_": [],
                    "alias": ""
                },
                {
                    "params": [],
                    "name": "Turbidez",
                    "params_": [],
                    "alias": "",
                    "unit": "NTU"
                }
            ],
            "application": "Mar Menor",
            "type": "User",
            "esIndex": "5f8edc99a3302d002d06241d_63234ed9c6520a002bac4441",
            "esPhysicalStationsAlias": "5f8edc99a3302d002d06241d_locations",
            "__v": 0
        },
        {
            "name": "Cámaras",
            "description": "Mediciones de Photrack",
            "active": true,
            "telegramChatIds": [],
            "_id": "634d862df29d2d0020948ed3",
            "sensorTypes": [
                {
                    "params": [],
                    "name": "discharge",
                    "alias": "Caudal",
                    "unit": "cubic_meter",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "level",
                    "alias": "Profundidad Agua",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "velocity",
                    "alias": "Velocidad Agua",
                    "params_": []
                }
            ],
            "application": "Mar Menor",
            "type": "User",
            "esIndex": "5f8edc99a3302d002d06241d_634d862df29d2d0020948ed3",
            "esPhysicalStationsAlias": "5f8edc99a3302d002d06241d_locations",
            "__v": 0
        },
        {
            "name": "SIAM-IMIDA",
            "description": "Estaciones meteorológicas de la red SIAM-IMIDA",
            "active": true,
            "telegramChatIds": [],
            "_id": "63da27d9d49d11002b8b4d2c",
            "sensorTypes": [
                {
                    "params": [],
                    "name": "temperature",
                    "unit": "celsius",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "precipitation",
                    "unit": "millimeter",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "humidity",
                    "unit": "percent",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "solar_radiation",
                    "unit": "watt",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "wind_velocity",
                    "unit": "meter-per-second",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "wind_direction",
                    "unit": "degree",
                    "params_": []
                }
            ],
            "application": "Mar Menor",
            "type": "User",
            "esIndex": "5f8edc99a3302d002d06241d_63da27d9d49d11002b8b4d2c",
            "esPhysicalStationsAlias": "5f8edc99a3302d002d06241d_locations",
            "__v": 0
        },
        {
            "name": "AEMET",
            "description": "Red de estaciones meteorológicas de AEMET.",
            "active": true,
            "telegramChatIds": [],
            "_id": "63dc05b2d49d11002b8b4d35",
            "sensorTypes": [
                {
                    "params": [],
                    "name": "prec",
                    "alias": "precipitation",
                    "unit": "millimeter",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "vv",
                    "alias": "wind_speed",
                    "unit": "meter-per-second",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "dv",
                    "alias": "wind_direction",
                    "unit": "degree",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "pres",
                    "alias": "pressure",
                    "unit": "millibar",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "hr",
                    "alias": "relative_humidity",
                    "unit": "percent",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "stdvv",
                    "alias": "wind_speed_standard_deviation",
                    "unit": "meter-per-second",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "ts",
                    "alias": "soil_temperature",
                    "unit": "celsius",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "pres_nmar",
                    "alias": "sea_level_pressure",
                    "unit": "millibar",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "ta",
                    "alias": "air_temperature",
                    "unit": "celsius",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "tpr",
                    "alias": "dew_point_temperature",
                    "unit": "celsius",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "vis",
                    "alias": "visibility",
                    "unit": "kilometer",
                    "params_": []
                },
                {
                    "params": [],
                    "name": "rviento",
                    "alias": "wind_traveled_distance (Hectometers)",
                    "params_": []
                }
            ],
            "application": "Mar Menor",
            "type": "User",
            "esIndex": "5f8edc99a3302d002d06241d_63dc05b2d49d11002b8b4d35",
            "esPhysicalStationsAlias": "5f8edc99a3302d002d06241d_locations",
            "__v": 0
        },
        {
            "name": "Satelite CNN",
            "description": "Datos satelitales obtenidos con CNN propia sobre las reflectacias del sentinel 3",
            "active": false,
            "telegramChatIds": [],
            "_id": "6425a279d49d11002b8b4d42",
            "sensorTypes": [
                {
                    "params": [],
                    "name": "Clorofila",
                    "unit": "microgram-per-liter",
                    "params_": []
                }
            ],
            "application": "Mar Menor",
            "type": "User",
            "esIndex": "5f8edc99a3302d002d06241d_6425a279d49d11002b8b4d42",
            "esPhysicalStationsAlias": "5f8edc99a3302d002d06241d_locations",
            "__v": 0
        }
    ]
}


var sensorTypes = [];

datos.userHardSensors.map(function (t) {
    if (t.sensorTypes) {
        t.sensorTypes.map(function (st) {
            if (st.unit) {
                if (sensorTypes.indexOf(st.unit)) {
                    sensorTypes.push( {
                        name: st.name,
                        unit: st.unit
                    });
                }
            }
        });
    }
});

console.log(sensorTypes);



